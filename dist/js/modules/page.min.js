/* Tabulator v4.9.1 (c) Oliver Folkerd */
var Page=function(e){this.table=e,this.mode="local",this.progressiveLoad=!1,this.size=0,this.page=1,this.paginationButtonCount=5,this.max=1,this.displayIndex=0,this.initialLoad=!0,this.pageSizes=[],this.createElements()};Page.prototype.createElements=function(){var e;this.element=document.createElement("span"),this.element.classList.add("tabulator-paginator"),this.pagesElement=document.createElement("span"),this.pagesElement.classList.add("tabulator-pages"),e=document.createElement("button"),e.classList.add("tabulator-page"),e.setAttribute("type","button"),e.setAttribute("role","button"),e.setAttribute("aria-label",""),e.setAttribute("title",""),this.firstBut=e.cloneNode(!0),this.firstBut.setAttribute("data-page","first"),this.prevBut=e.cloneNode(!0),this.prevBut.setAttribute("data-page","prev"),this.nextBut=e.cloneNode(!0),this.nextBut.setAttribute("data-page","next"),this.lastBut=e.cloneNode(!0),this.lastBut.setAttribute("data-page","last"),this.table.options.queryInfoVisible&&(this.queryInfo=document.createElement("span"),this.queryInfo.classList.add("query-info")),this.table.options.queryCountVisible&&(this.queryCount=document.createElement("span"),this.queryCount.classList.add("query-count")),this.table.options.paginationSizeSelector&&(this.pageSizeSelect=document.createElement("select"),this.pageSizeSelect.classList.add("tabulator-page-size"))},Page.prototype.generatePageSizeSelectList=function(){var e=this,t=[];if(this.pageSizeSelect){if(Array.isArray(this.table.options.paginationSizeSelector))t=this.table.options.paginationSizeSelector,this.pageSizes=t,-1==this.pageSizes.indexOf(this.size)&&t.unshift(this.size);else if(-1==this.pageSizes.indexOf(this.size)){t=[];for(var i=1;i<5;i++)t.push(this.size*i);this.pageSizes=t}else t=this.pageSizes;for(;this.pageSizeSelect.firstChild;)this.pageSizeSelect.removeChild(this.pageSizeSelect.firstChild);t.forEach(function(t){var i=document.createElement("option");i.value=t,!0===t?e.table.modules.localize.bind("pagination|all",function(e){i.innerHTML=e}):i.innerHTML=t,e.pageSizeSelect.appendChild(i)}),this.pageSizeSelect.value=this.size}},Page.prototype.initialize=function(e){var t,i,a,n=this;n.table.modules.localize.bind("pagination|first",function(e){n.firstBut.innerHTML=e}),n.table.modules.localize.bind("pagination|first_title",function(e){n.firstBut.setAttribute("aria-label",e),n.firstBut.setAttribute("title",e)}),n.table.modules.localize.bind("pagination|prev",function(e){n.prevBut.innerHTML=e}),n.table.modules.localize.bind("pagination|prev_title",function(e){n.prevBut.setAttribute("aria-label",e),n.prevBut.setAttribute("title",e)}),n.table.modules.localize.bind("pagination|next",function(e){n.nextBut.innerHTML=e}),n.table.modules.localize.bind("pagination|next_title",function(e){n.nextBut.setAttribute("aria-label",e),n.nextBut.setAttribute("title",e)}),n.table.modules.localize.bind("pagination|last",function(e){n.lastBut.innerHTML=e}),n.table.modules.localize.bind("pagination|last_title",function(e){n.lastBut.setAttribute("aria-label",e),n.lastBut.setAttribute("title",e)}),n.firstBut.addEventListener("click",function(){n.setPage(1).then(function(){}).catch(function(){})}),n.prevBut.addEventListener("click",function(){n.previousPage().then(function(){}).catch(function(){})}),n.nextBut.addEventListener("click",function(){n.nextPage().then(function(){}).catch(function(){})}),n.lastBut.addEventListener("click",function(){n.setPage(n.max).then(function(){}).catch(function(){})}),n.table.options.paginationElement&&(n.element=n.table.options.paginationElement),this.pageSizeSelect&&(t=document.createElement("label"),n.table.modules.localize.bind("pagination|page_size",function(e){n.pageSizeSelect.setAttribute("aria-label",e),n.pageSizeSelect.setAttribute("title",e),t.innerHTML=e}),n.element.appendChild(t),n.element.appendChild(n.pageSizeSelect),n.pageSizeSelect.addEventListener("change",function(e){n.setPageSize("true"==n.pageSizeSelect.value||n.pageSizeSelect.value),n.setPage(1).then(function(){}).catch(function(){})})),n.queryInfo&&n.element.appendChild(n.queryInfo),n.queryCount&&n.element.appendChild(n.queryCount),n.element.appendChild(n.firstBut),n.element.appendChild(n.prevBut),n.element.appendChild(n.pagesElement),n.element.appendChild(n.nextBut),n.element.appendChild(n.lastBut),n.table.options.paginationElement||e||n.table.footerManager.append(n.element,n),n.mode=n.table.options.pagination,n.table.options.paginationSize?n.size=n.table.options.paginationSize:(i=document.createElement("div"),i.classList.add("tabulator-row"),i.style.visibility=e,a=document.createElement("div"),a.classList.add("tabulator-cell"),a.innerHTML="Page Row Test",i.appendChild(a),n.table.rowManager.getTableElement().appendChild(i),n.size=Math.floor(n.table.rowManager.getElement().clientHeight/i.offsetHeight),n.table.rowManager.getTableElement().removeChild(i)),n.table.options.paginationButtonCount&&(n.paginationButtonCount=n.table.options.paginationButtonCount),n.generatePageSizeSelectList()},Page.prototype.initializeProgressive=function(e){this.initialize(!0),this.mode="progressive_"+e,this.progressiveLoad=!0},Page.prototype.setDisplayIndex=function(e){this.displayIndex=e},Page.prototype.getDisplayIndex=function(){return this.displayIndex},Page.prototype.setMaxRows=function(e){this.max=e?!0===this.size?1:Math.ceil(e/this.size):1,this.page>this.max&&(this.page=this.max)},Page.prototype.reset=function(e,t){return("local"==this.mode||e)&&(this.page=1),t&&(this.initialLoad=!0),!0},Page.prototype.setMaxPage=function(e){e=parseInt(e),this.max=e||1,this.page>this.max&&(this.page=this.max,this.trigger())},Page.prototype.setQueryInfo=function(e){this.queryInfo&&(this.queryInfo.innerText=e)},Page.prototype.setResultCount=function(e){this.queryCount&&(this.queryCount.innerText=e)},Page.prototype.setPage=function(e){var t=this,i=this;switch(e){case"first":return this.setPage(1);case"prev":return this.previousPage();case"next":return this.nextPage();case"last":return this.setPage(this.max)}return new Promise(function(a,n){e=parseInt(e),e>0&&e<=t.max?(t.page=e,t.trigger().then(function(){a()}).catch(function(){n()}),i.table.options.persistence&&i.table.modExists("persistence",!0)&&i.table.modules.persistence.config.page&&i.table.modules.persistence.save("page")):(console.warn("Pagination Error - Requested page is out of range of 1 - "+t.max+":",e),n())})},Page.prototype.setPageToRow=function(e){var t=this;return new Promise(function(i,a){var n=t.table.rowManager.getDisplayRows(t.displayIndex-1),s=n.indexOf(e);if(s>-1){var o=!0===t.size?1:Math.ceil((s+1)/t.size);t.setPage(o).then(function(){i()}).catch(function(){a()})}else console.warn("Pagination Error - Requested row is not visible"),a()})},Page.prototype.setPageSize=function(e){!0!==e&&(e=parseInt(e)),e>0&&(this.size=e),this.pageSizeSelect&&this.generatePageSizeSelectList(),this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.page&&this.table.modules.persistence.save("page")},Page.prototype._setPageButtons=function(){for(var e=this,t=Math.floor((this.paginationButtonCount-1)/2),i=Math.ceil((this.paginationButtonCount-1)/2),a=this.max-this.page+t+1<this.paginationButtonCount?this.max-this.paginationButtonCount+1:Math.max(this.page-t,1),n=this.page<=i?Math.min(this.paginationButtonCount,this.max):Math.min(this.page+i,this.max);e.pagesElement.firstChild;)e.pagesElement.removeChild(e.pagesElement.firstChild);1==e.page?(e.firstBut.disabled=!0,e.prevBut.disabled=!0):(e.firstBut.disabled=!1,e.prevBut.disabled=!1),e.page==e.max?(e.lastBut.disabled=!0,e.nextBut.disabled=!0):(e.lastBut.disabled=!1,e.nextBut.disabled=!1);for(var s=a;s<=n;s++)s>0&&s<=e.max&&e.pagesElement.appendChild(e._generatePageButton(s));this.footerRedraw()},Page.prototype._generatePageButton=function(e){var t=this,i=document.createElement("button");return i.classList.add("tabulator-page"),e==t.page&&i.classList.add("active"),i.setAttribute("type","button"),i.setAttribute("role","button"),t.table.modules.localize.bind("pagination|page_title",function(t){i.setAttribute("aria-label",t+" "+e),i.setAttribute("title",t+" "+e)}),i.setAttribute("data-page",e),i.textContent=e,i.addEventListener("click",function(i){t.setPage(e).then(function(){}).catch(function(){})}),i},Page.prototype.previousPage=function(){var e=this;return new Promise(function(t,i){e.page>1?(e.page--,e.trigger().then(function(){t()}).catch(function(){i()}),e.table.options.persistence&&e.table.modExists("persistence",!0)&&e.table.modules.persistence.config.page&&e.table.modules.persistence.save("page")):(console.warn("Pagination Error - Previous page would be less than page 1:",0),i())})},Page.prototype.nextPage=function(){var e=this;return new Promise(function(t,i){e.page<e.max?(e.page++,e.trigger().then(function(){t()}).catch(function(){i()}),e.table.options.persistence&&e.table.modExists("persistence",!0)&&e.table.modules.persistence.config.page&&e.table.modules.persistence.save("page")):(e.progressiveLoad||console.warn("Pagination Error - Next page would be greater than maximum page of "+e.max+":",e.max+1),i())})},Page.prototype.getParams=function(){return{pageSize:this.size,max:this.max,page:this.page,mode:this.mode}},Page.prototype.getPage=function(){return this.page},Page.prototype.getPageMax=function(){return this.max},Page.prototype.getPageSize=function(e){return this.size},Page.prototype.getMode=function(){return this.mode},Page.prototype.getRows=function(e){var t,i,a;if("local"==this.mode){t=[],!0===this.size?(i=0,a=e.length):(i=this.size*(this.page-1),a=i+parseInt(this.size)),this._setPageButtons();for(var n=i;n<a;n++)e[n]&&t.push(e[n]);return t}return this._setPageButtons(),e.slice(0)},Page.prototype.trigger=function(){return this.table.dataManager.getData()},Page.prototype.footerRedraw=function(){var e=this.table.footerManager.element;Math.ceil(e.clientWidth)-e.scrollWidth<0?this.pagesElement.style.display="none":(this.pagesElement.style.display="",Math.ceil(e.clientWidth)-e.scrollWidth<0&&(this.pagesElement.style.display="none"))},Tabulator.prototype.registerModule("page",Page);